# 计算机网络学习笔记

**图示说明**

<img src="assets/20201016103344.png" alt="image-20201007143815954" style="zoom: 50%;" />代表着主机

<img src="assets/20201016103558.png" alt="image-20201007144130208" style="zoom:50%;" /> 代表服务器

<img src="assets/20201016103603.png" alt="image-20201007143904153" style="zoom:50%;" /> 代表着路由器

<img src="assets/20201016103608.png" alt="image-20201007143936128" style="zoom:50%;" />代表着网络

- [计算机网络学习笔记](#计算机网络学习笔记)
- [概述](#概述)
  - [1 因特网概述](#1-因特网概述)
    - [1.1 网络、互连网（互联网）和因特网](#11-网络互连网互联网和因特网)
    - [1.2 因特网发展的三个阶段](#12-因特网发展的三个阶段)
    - [1.3 因特网的组成](#13-因特网的组成)
      - [补充：](#补充)
  - [2 三种交换方式](#2-三种交换方式)
    - [2.1 电路交换（Circuit Switching）](#21-电路交换circuit-switching)
    - [2.2 分组交换（Packet Switching）](#22-分组交换packet-switching)
    - [2.3 报文交换（Message Switching）](#23-报文交换message-switching)
    - [2.4 三种交换方式的对比](#24-三种交换方式的对比)
  - [3 计算机网络的定义和分类](#3-计算机网络的定义和分类)
    - [3.1 定义](#31-定义)
    - [3.2 分类](#32-分类)
  - [4 计算机网络的性能指标](#4-计算机网络的性能指标)
    - [4.1 速率](#41-速率)
    - [4.2 带宽](#42-带宽)
    - [4.3 吞吐量](#43-吞吐量)
    - [4.4 时延](#44-时延)
    - [4.5 时延带宽积](#45-时延带宽积)
    - [4.6 往返时间](#46-往返时间)
    - [4.7 利用率](#47-利用率)
    - [4.8 丢包率](#48-丢包率)
  - [5 计算机网络体系结构](#5-计算机网络体系结构)
    - [5.1 常见的计算机网络体系结构](#51-常见的计算机网络体系结构)
    - [5.2 计算机网络体系结构分层的必要性](#52-计算机网络体系结构分层的必要性)
    - [5.3 计算机网络体系结构分层思想举例](#53-计算机网络体系结构分层思想举例)
    - [5.4 计算机网络体系结构中的专用术语](#54-计算机网络体系结构中的专用术语)
- [物理层](#物理层)
  - [1 物理层的基本概念](#1-物理层的基本概念)
  - [2 物理层下面的传输媒体](#2-物理层下面的传输媒体)
    - [2.1 导引型传输媒体](#21-导引型传输媒体)
    - [2.2 非导引型传输媒体](#22-非导引型传输媒体)
  - [3 传输方式](#3-传输方式)
    - [3.1 串行传输和并行传输](#31-串行传输和并行传输)
    - [3.2 同步传输和异步传输](#32-同步传输和异步传输)
    - [3.3 单向通信（单工）、双向交替通信（半双工）和双向同时通信（全双工）](#33-单向通信单工双向交替通信半双工和双向同时通信全双工)
  - [4 编码与调制](#4-编码与调制)
    - [4.1 传输媒体与信道的关系](#41-传输媒体与信道的关系)
    - [4.2 常用编码](#42-常用编码)
    - [4.3 调制](#43-调制)
    - [4.4 码元](#44-码元)
  - [5 信道的极限容量](#5-信道的极限容量)
  - [6 信道复用技术](#6-信道复用技术)
    - [6.1 频分复用、时分复用和统计时分复用](#61-频分复用时分复用和统计时分复用)
    - [6.2 波分复用](#62-波分复用)
    - [6.3 码分复用](#63-码分复用)


# 概述

## 1 因特网概述

### 1.1 网络、互连网（互联网）和因特网

网络：网络（Network）由若干**结点**（Node）和连接这些结点的**链路**（Link）组成。

<img src="assets/20201016103711.png" alt="image-20201006163406232" style="zoom: 50%;" />

互连网（互联网）：多个网络通过路由器互连起来，这样就构成了一个覆盖范围更大的网络，即互连网（互联网）。因此，互联网又称为“网络的网络（Network of Networks）”。

<img src="assets/20201016103716.png" alt="image-20201006163857236" style="zoom:50%;" />

因特网：因特网（Internet）是世界上最大的互连网络（用户数以亿计，互连的网络数以百万计）。

<img src="assets/20201016103720.png" alt="image-20201006164114523" style="zoom:50%;" />

> **internet与Internet的区别**
>
> * **internet(互联网或互连网)**是一个通用名词，它泛指**多个计算机网络互连而成的网络**。在这些网络之间的通信协议可以是任意的。
> * **Internet（因特网）则是一个专用名词**，它指**当前全球最大的、开放的、由众多网络互连而成的特定计算机网络**，它采用TCP/IP协议族作为通信的规则，其前身是美国的ARPANET。
>
> **任意把几个计算机网络互连起来（不管采用什么协议），并能够相互通信，这样构成的是一个互连网(internet) ，而不是互联网(Internet)。**

![image-20201010233227407](assets/20201016103731.png)

### 1.2 因特网发展的三个阶段

![image-20201006164655173](assets/20201016103739.png)

**因特网服务提供者`ISP`(`I`nternet `S`ervice `P`rovider)**

<img src="assets/20201016103744.png" alt="image-20201006165117756" style="zoom:67%;" />

> 普通用户是如何接入到因特网的呢？
>
> 答：**通过ISP接入因特网**
>
> ISP可以从因特网管理机构申请到成块的IP地址，同时拥有通信线路以及路由器等联网设备。任何机构和个人只需缴纳费用，就可从**ISP的得到所需要的IP地址**。
>
> **因为因特网上的主机都必须有IP地址才能进行通信，这样就可以通过该ISP接入到因特网**



**中国的三大`ISP`：中国电信，中国联通和中国移动**

<img src="assets/20201016103801.png" alt="image-20201006165738879" style="zoom:67%;" />



**基于ISP的三层结构的因特网**

<img src="assets/20201016103810.png" alt="image-20201006170140504" style="zoom:67%;" />

> 一旦某个用户能够接入到因特网，那么他也可以成为一个ISP，所需要做的就是购买一些如调制解调器或路由器这样的设备，让其他用户可以和他相连。


### 1.3 因特网的组成

* 边缘部分

  由所有连接在因特网上的**主机**组成（台式电脑，大型服务器，笔记本电脑，平板，智能手机等）。这部分是**用户直接使用**的，用来进行**通信**（传送数据、音频或视频）和**资源共享**。

* 核心部分

  由**大量网络**和连接这些网络的**路由器**组成。这部分是**为边缘部分提供服务**的（提供连通性和交换）。

<img src="assets/20201016103822.png" alt="image-20201006180725282" style="zoom:67%;" />

> 路由器是一种专用计算机，但我们不称它为主机，路由器是实现分组交换的关键构建，其任务是转发收到的分组，这是网络核心最重要的部分。
>
> 处在互联网边缘的部分就是连接在互联网上的所有的主机。这些主机又称为**端系统 (end system)**。
>
> **端系统在功能上可能有很大的差别：**
>
> 1. 小的端系统可以是一台普通个人电脑，具有上网功能的智能手机，甚至是一个很小的网络摄像头。
>
> 2. 大的端系统则可以是一台非常昂贵的大型计算机。
>
> 3. 端系统的拥有者可以是个人，也可以是单位（如学校、企业、政府机关等），当然也可以是某个ISP。

#### 补充：

**端系统之间通信的含义**

“主机 A 和主机 B 进行通信”实际上是指：“运行在主机 A 上的某个程序和运行在主机 B 上的另一个程序进行通信”。**即“主机** **A** **的某个进程和主机** **B** **上的另一个进程进行通信”。简称为“计算机之间通信”。** 

端系统之间的通信方式通常可划分为两大类：

![image-20201010234145371](assets/20201016103829.png)

**客户-服务器方式：**

* 客户 (client) 和服务器 (server) 都是指通信中所涉及的两个应用进程。
* 客户 - 服务器方式所描述的是进程之间服务和被服务的关系。
* 客户是服务的请求方，服务器是服务的提供方。

> **服务请求方和服务提供方都要使用网络核心部分所提供的服务。**

**对等连接方式：**

* **对等连接** (peer-to-peer，简写为 **P2P** ) 是指两个主机在通信时并不区分哪一个是服务请求方还是服务提供方。
* 只要两个主机都运行了对等连接软件 ( P2P 软件) ，它们就可以进行**平等的、对等连接通信**。
* 双方都可以下载对方已经存储在硬盘中的共享文档。 



------



## 2 三种交换方式

网络核心部分是互联网中最复杂的部分。

网络中的核心部分要向网络边缘中的大量主机提供连通性，使边缘部分中的任何一个主机都能够向其他主机通信（即传送或接收各种形式的数据）。

在网络核心部分起特殊作用的是**路由器**(router)。

**路由器**是实现**分组交换** (packet switching) 的关键构件，其任务是**转发**收到的分组，这是网络核心部分最重要的功能。

### 2.1 电路交换（Circuit Switching）

<img src="assets/20201016103836.png" alt="image-20201006182240000" style="zoom:67%;" />

> 传统两两相连的方式，当电话数量很多时，电话线也很多，就很不方便
>
> 所以要使得每一部电话能够很方便地和另一部电话进行通信，就应该使用一个**中间设备**将这些电话连接起来，这个中间设备就是**电话交换机**

<img src="assets/20201016103840.png" alt="image-20201006182634249" style="zoom:50%;" />

* 电话交换机接通电话线的方式称为电路交换；

* 从通信资源的分配角度来看，交换（Switching）就是按照某种方式动态地分配传输线路的资源；

* 电路交换的三个步骤：
  1. 建立连接（分配通信资源）
  2. 通话（一直占用通信资源）
  3. 释放连接（归还通信资源）

<img src="assets/20201016103845.png" alt="image-20201006183020317" style="zoom:67%;" />

> 当使用电路交换来传送计算机数据时，其线路的传输效率往往很低。
>
> 这是因为计算机数据是突发式地出现在传输线路上的。
>
> 所以计算机通常采用的是**分组交换**，而不是线路交换



### 2.2 分组交换（Packet Switching）

<img src="assets/20201016103852.png" alt="image-20201006183312843" style="zoom:67%;" />

> 通常我们把表示**该消息的整块数据**称为一个**报文**。
>
> 在发送报文之前，先把较长的报文划分成一个个更小的**等长数据段**，在每一个数据段前面。加上一些由必**要的控制信息组成的首部**后，就构成一个分组，也可简称为“包”，相应地，首部也可称为“包头”。
>
> 首部包含了**分组的目的地址**
>
> 分组从源主机到目的主机，可走不同的路径。

发送方

* 构造分组
* 发送分组

路由器

* 缓存分组
* 转发分组
* 简称为“分组转发”

> 在路由器中的输入和输出端口之间没有直接连线。
>
> 路由器处理分组的过程是：
>
> 1. 把收到的分组先**放入缓存（暂时存储）；**
> 2. **查找转发表**，找出到某个目的地址应从哪个端口转发；
> 3. 把分组送到适当的端口**转发**出去。

接收方

* 接收分组
* 还原报文



### 2.3 报文交换（Message Switching）

报文交换中的交换结点也采用存储转发方式，但报文交换对报文的大小没有限制，这就要求交换结点需要较大的缓存空间。报文交换主要用于早期的电报通信网，现在较少使用，**通常被较先进的分组交换方式所取代**。



### 2.4 三种交换方式的对比

> 假设A，B，C，D是分组传输路径所要经过的4个结点交换机，纵坐标为时间

<img src="assets/20201016103900.png" alt="image-20201006184451671" style="zoom:67%;" />

分析：

电路交换：

* 通信之前首先要建立连接；连接建立好之后，就可以使用已建立好的连接进行数据传送；数据传送后，需释放连接，以归还之前建立连接所占用的通信线路资源。

* 一旦建立连接，中间的各结点交换机就是直通形式的，比特流可以直达终点；

报文交换：

* 可以随时发送报文，而不需要事先建立连接；整个报文先传送到相邻结点交换机，全部存储下来后进行查表转发，转发到下一个结点交换机。
* 整个报文需要在各结点交换机上进行存储转发，由于不限制报文大小，因此需要各结点交换机都具有较大的缓存空间。

分组交换：

* 可以随时发送分组，而不需要事先建立连接。构成原始报文的一个个分组，依次在各结点交换机上存储转发。各结点交换机在发送分组的同时，还缓存接收到的分组。
* 构成原始报文的一个个分组，在各结点交换机上进行存储转发，相比报文交换，减少了转发时延，还可以避免过长的报文长时间占用链路，同时也有利于进行差错控制。

![image-20201006185601460](assets/20201016103949.png)



------



## 3 计算机网络的定义和分类

### 3.1 定义

* 计算机网络的精确定义并未统一
* 计算机网络的最简单的定义是：一些**互**相**连**接的、**自治**的计算机的**集合**。
  * 互连：是指计算机之间可以通过有线或无线的方式进行数据通信；
  * 自治：是指独立的计算机，他有自己的硬件和软件，可以单独运行使用；
  * 集合：是指至少需要两台计算机；
* 计算机网络的较好的定义是：计算机网络主要是由一些**通用的，可编程的硬件（一定包含有中央处理机CPU）互连**而成的，而这些硬件并非专门用来实现某一特定目的（例如，传送数据或视频信号）。这些可编程的硬件能够用来**传送多种不同类型的数据**，并能**支持广泛的和日益增长的应用**。
  * 计算机网络所连接的硬件，并不限于一般的计算机，而是包括了智能手机等智能硬件。
  * 计算机网络并非专门用来传送数据，而是能够支持很多种的应用（包括今后可能出现的各种应用）。



### 3.2 分类

**按交换技术分类：**

* 电路交换网络
* 报文交换网络
* 分组交换网络

**按使用者分类：**

* 公用网
* 专用网

**按传输介质分类：**

* 有线网络
* 无线网络

**按覆盖范围分类：**

* 广域网WAN（Wide Area Network）

作用范围通常为几十到几千公里，因而有时也称为远程网（long haul network）。广域网是互联网的核心部分，其任务是通过长距离（例如，跨越不同的国家）运送主机所发送的数据。

* 城域网MAN

作用范围一般是一个城市，可跨越几个街区甚至整个城市

* 局域网LAN

一般用微型计算机或工作站通过高速通信线路相连（速率通常在 10 Mbit/s 以上），但地理上范围较小（1 km 左右）

* 个域网PAN

就是在个人工作的地方把个人使用的电子设备用无线技术连接起来的网络。

**按拓扑结构分类：**

* 总线型网络

<img src="assets/20201016103958.png" alt="image-20201007005149993" style="zoom: 67%;" />

* 星型网络

<img src="assets/20201016104005.png" alt="image-20201007005203129" style="zoom:67%;" />

* 环形网络

<img src="assets/20201016104009.png" alt="image-20201007005212345" style="zoom:67%;" />

* 网状型网络

<img src="assets/20201016104015.png" alt="image-20201007005249137" style="zoom:67%;" />



------



## 4 计算机网络的性能指标

### 4.1 速率

![image-20201007012419698](assets/20201016104021.png)

![image-20201007012439769](assets/20201016104026.png)





### 4.2 带宽

![image-20201007012943970](assets/20201016104031.png)





### 4.3 吞吐量

![image-20201007013119621](assets/20201016104038.png)

> 带宽1 Gb/s的以太网，代表其额定速率是1 Gb/s，这个数值也是该以太网的**吞吐量的绝对上限值**。因此，对于带宽1 Gb/s的以太网，可能实际吞吐量只有 700 Mb/s，甚至更低。
>
> 注意：吞吐量还可以用每秒传送的字节数或帧数表示



### 4.4 时延

时延是指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间。

网络时延由几部分组成：

* 发送时延

主机或路由器发送数据帧所需要的时间，也就是从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需的时间。

* 传播时延

电磁波在信道中传播一定的距离需要花费的时间。

* 处理时延

主机或路由器在收到分组时要花费一定时间进行处理

* 排队时延

分组在进过网络传输时，要经过许多路由器。但分组在进入路由器后要先在输入队列中排队等待处理。

> 有时会把排队时延看成**处理时延 一部分**
>
> 总时延 = 发送时延 + 传播时延 + 处理时延 （处理时延 + 排队时延）

![image-20201007014139333](assets/20201016104045.png)

![image-20201007015401505](assets/20201016104050.png)

> 当处理时延忽略不计时，发送时延 和 传播时延谁占主导，要具体情况具体分析



### 4.5 时延带宽积

时延带宽积 = 传播时延 * 带宽

![image-20201007115317347](assets/20201016104057.png)



### 4.6 往返时间

互联网上的信息不仅仅单方向传输而是双向交互的。因此，我们有时很需要知道**双向交互一次所需的时间**。

![image-20201007115647631](assets/20201016104104.png)



### 4.7 利用率

利用率有**信道利用率**和**网络利用率**两种。

![image-20201012164544306](assets/20201016104110.png)



### 4.8 丢包率

![image-20201007132900210](assets/20201016104116.png)



------



## 5 计算机网络体系结构

### 5.1 常见的计算机网络体系结构

![image-20201007133848212](assets/20201016104122.png)

> 如今用的最多的是TCP/IP体系结构，现今规模最大的、覆盖全球的、基于TCP/IP的互联网并未使用OSI标准。
>
> TCP/IP体系结构相当于将OSI体系结构的**物理层**和**数据链路层**合并为了**网络接口层**，并去掉了**会话层**和**表示层**。
>
> TCP/IP在网络层使用的协议是IP协议，IP协议的意思是网际协议，因此**TCP/IP体系结构的网络层称为网际层**

![image-20201007135220030](assets/20201016104127.png)

> 在用户主机的操作系统中，通常都带有符合TCP/IP体系结构标准的TCP/IP协议族。
>
> 而用于网络互连的路由器中，也带有符合TCP/IP体系结构标准的TCP/IP协议族。
>
> 只不过路由器一般只包含网络接口层和网际层。

![image-20201007135518050](assets/20201016104135.png)

> **网络接口层**：并没有规定具体内容，这样做的目的是可以互连全世界各种不同的网络接口，例如：有线的以太网接口，无线局域网的WIFI接口等。
>
> **网际层**：它的核心协议是IP协议。
>
> **运输层**：TCP和UDP是这层的两个重要协议。
>
> **应用层**：这层包含了大量的应用层协议，如 HTTP , DNS 等。

> **IP协议**（网际层）可以将不同的**网络接口**（网络接口层）进行互连，并向其上的**TCP协议和UDP协议**（运输层）提供网络互连服务
>
> 而**TCP协议**在享受 IP 协议提供的网络互连服务的基础上，可向**应用层的相应协议**提供**可靠**的传输服务。
>
> **UDP协议**在享受 IP 协议提供的网络互连服务的基础上，可向**应用层的相应协议**提供**不可靠**的传输服务。

> TCP/IP体系结构中最重要的是**IP协议**和**TCP协议**，因此用TCP和IP来表示整个协议大家族。

![image-20201007141110338](assets/20201016104142.png)

> 教学时把TCP/IP体系结构的**网络接口层**分成了**物理层**和**数据链路层**



### 5.2 计算机网络体系结构分层的必要性

![image-20201007141318411](assets/20201016104151.png)

**物理层问题**

![image-20201007141806675](assets/20201016104156.png)

> 这图说明
>
> * 第一，严格来说，传输媒体并不属于物理层
> * 计算机传输的信号，并不是图示的方波信号
>
> 这样举例只是让初学者容易理解

**数据链路层问题**

![image-20201007142049812](assets/20201016104204.png)

**网络层问题**

![image-20201007142408792](assets/20201016104211.png)

**运输层问题**

![image-20201007142631029](assets/20201016104216.png)

>如何标识与网络通信相关的应用进程：一个分组到来，我们应该交给哪个进程处理呢？浏览器进程还是QQ进程

**应用层问题**

![image-20201007142755720](assets/20201016104224.png)

> 应用层该用什么方法（应用层协议）去解析数据

**总结**

![image-20201007204006284](assets/20201016104231.png)

![image-20201007143138937](assets/20201016104235.png)

![image-20201007195641140](assets/20201016104241.png)



### 5.3 计算机网络体系结构分层思想举例

例子：主机的浏览器如何与Web服务器进行通信

![image-20201007144900565](assets/20201016104246.png)



**解析：**

主机和Web服务器之间基于网络的通信，实际上是主机中的**浏览器应用进程**与Web服务器中的**Web服务器应用进程**之间基于**网络的通信**

![image-20201007145242020](assets/20201016104254.png)



**体系结构的各层在整个过程中起到怎样的作用？**

**1. 发送方发送**

![image-20201007145441370](assets/20201016104300.png)

> 第一步：
>
> * **应用层**按照HTTP协议的规定构建一个**HTTP请求报文**
> * 应用层将**HTTP请求报文**交付给**运输层**处理

![image-20201007145720661](assets/20201016104304.png)

> 第二步：
>
> * **运输层**给**HTTP请求报文**添加一个**TCP首部**，使之成为**TCP报文段**
> * **TCP报文段的首部格式**作用是区分应用进程以及实现可靠传输
> * **运输层**将T**CP报文段**交付给**网络层**处理

![image-20201007150234909](assets/20201016104309.png)

> 第三步：
>
> * **网络层**给**TCP报文段**添加一个**IP首部**，使之成为**IP数据报**
> * **IP数据报的首部格式**作用是使**IP数据报**可以在互联网传输，也就是被路由器转发
> * **网络层**将**IP数据报**交付给**数据链路层**处理

![image-20201007150723365](assets/20201016104314.png)

> 第四步：
>
> * **数据链路层**给**IP数据报**添加一个**首部**和一个**尾部**，使之成为**帧**     （图示右边为首部，左边为尾部） 
> * 该**首部**的作用主要是为了让**帧**能够在一段链路上或一个网络上传输，能够被相应的目的主机接收
> * 该**尾部**的作用是让目的主机检查所接收到的**帧**是否有误码
> * **数据链路层**将**帧**交付给**物理层**

![image-20201007151342502](assets/20201016104319.png)

> 第五步：
>
> * **物理层**先将**帧**看做是**比特流**，这里的网络N1假设是以太网，所以**物理层**还会给该**比特流**前面添加**前导码**
> * **前导码**的作用是为了让目的主机做好接收帧的准备
> * **物理层**将装有**前导码**的**比特流**变换成相应的**信号**发送给传输媒体

![image-20201007151900254](assets/20201016104325.png)

> 第六步：
>
> * **信号**通过**传输媒体**到达**路由器**



**2. 路由器转发**

<img src="assets/20201016104331.png" alt="image-20201007152029458" style="zoom:50%;" />

<img src="assets/20201016104337.png" alt="image-20201007152138961" style="zoom:50%;" />

<img src="assets/20201016104350.png" alt="image-20201007152627778" style="zoom:50%;" />

> 在路由器中
>
> * **物理层**将**信号**变为**比特流**，然后去掉**前导码**后，将其交付给**数据链路层**
> * **数据链路层**将**帧**的**首部**和**尾部**去掉后，将其交付给**网络层**，这实际交付的是**IP数据报**
> * **网络层**解析**IP数据报**的**首部**，从中提取**目的网络地址**

<img src="assets/20201016104356.png" alt="image-20201007152650863" style="zoom:50%;" />

<img src="assets/20201016104400.png" alt="image-20201007152812431" style="zoom:50%;" />

<img src="assets/20201016104404.png" alt="image-20201007153714840" style="zoom:50%;" />

> 在路由器中
>
> * 提取**目的网络地址**后查找**自身路由表**。确定**转发端口**， 以便进行转发
> * **网络层**将**IP数据报**交付给**数据链路层**
> * **数据链路层**给**IP数据报**添加一个**首部**和一个**尾部**，使之成为**帧**
> * **数据链路层**将帧交付给**物理层**
> * **物理层**先将**帧**看成**比特流**，这里的网络N2假设是以太网，所以**物理层**还会给该**比特流**前面添加**前导码**
> * 物理层将装有**前导码**的**比特流**变换成相应的**信号**发送给传输媒体，信号通过传输媒体到达**Web服务器**



**3. 接收方接收**

> 和发送方（主机）发送过程的封装正好是反着来
>
> 在Web 服务器上
>
> * **物理层**将**信号**变换为**比特流**，然后去掉**前导码**后成为**帧**，交付给**数据链路层**
> * **数据链路层**将**帧**的**首部**和**尾部**去掉后成为**IP数据报**，将其交付给**网络层**
> * **网络层**将**IP数据报**的**首部**去掉后成为**TCP报文段**，将其交付给**运输层**
> * **运输层**将**TCP报文段**的**首部**去掉后成为**HTTP请求报文**，将其交付给**应用层**
> * **应用层**对**HTTP请求报文**进行**解析**，然后给主机发回**响应报文**
>
> **发回响应报文的步骤和之前过程类似**

![image-20201007155051275](assets/20201016104410.png)



### 5.4 计算机网络体系结构中的专用术语

以下介绍的专用术语来源于OSI的七层协议体系结构，但也适用于TCP/IP的四层体系结构和五层协议体系结构

**实体**

![image-20201007155444920](assets/20201016104417.png)



**协议**

![image-20201007155545934](assets/20201016104423.png)

> 协议：控制两个对等实体进行逻辑通信的规则的集合
>
> 协议三要素：
>
> * 语法：定义所交换信息的格式
> * 语义：定义收发双方所要完成的操作
> * 同步：定义收发双发的时序关系



**服务**

![image-20201007160246561](assets/20201016104434.png)



![image-20201016104750288](assets/20201016104757.png)



![image-20201007162620250](assets/20201016104806.png)


# 物理层

## 1 物理层的基本概念

![image-20201008130211749](assets/image-20201008130211749.png)



------



## 2 物理层下面的传输媒体

**传输媒体**也称为传输介质或传输媒介，他就是数据传输系统中在发送器和接收器之间的物理通路。**传输媒体**可分为两大类，即**导引型传输媒体**和**非导引型传输媒体**

传输媒体不属于计算机网络体系结构的任何一层。如果非要将它添加到体系结构中，那只能将其放置到物理层之下。

### 2.1 导引型传输媒体

在导引型传输媒体中，电磁波被导引沿着固体媒体传播。

**同轴电缆**

![image-20201008132050917](assets/image-20201008132050917.png)

**双绞线**

![image-20201008132225715](assets/image-20201008132225715.png)

**光纤**

![image-20201008132403903](assets/image-20201008132403903.png)

![image-20201011001240573](assets/image-20201011001240573.png)

> **多模光纤**
>
> * 可以存在多条不同角度入射的光线在一条光纤中传输。这种光纤就称为**多模光纤**。
>
> **单模光纤**
>
> * 若光纤的直径减小到只有一个光的波长，则光纤就像一根波导那样，它可使光线一直向前传播，而不会产生多次反射。这样的光纤称为**单模光纤**。

**电力线**

![image-20201008132709015](assets/image-20201008132709015.png)



### 2.2 非导引型传输媒体

非导引型传输媒体是指自由空间。

![image-20201008132857833](assets/image-20201008132857833.png)

![image-20201008132943176](assets/image-20201008132943176.png)

**无线电波**

![image-20201008133135659](assets/image-20201008133135659.png)

**微波**

![image-20201008133317293](assets/image-20201008133317293.png)

**红外线**

![image-20201008133421986](assets/image-20201008133421986.png)

**可见光**

[LIFI](https://baike.baidu.com/item/%E5%8F%AF%E8%A7%81%E5%85%89%E6%97%A0%E7%BA%BF%E9%80%9A%E4%BF%A1/16268518?fromtitle=LiFi&fromid=5675729&fr=aladdin)



![image-20201008133718810](assets/image-20201008133718810.png)



------



## 3 传输方式

### 3.1 串行传输和并行传输

![image-20201008135603009](assets/image-20201008135603009.png)

> **串行传输**：
>
> * 数据是一个比特一个比特依次发送的，因此在发送端与接收端之间，只需要一条数据传输线路即可
>
> **并行传输**：
>
> * 一次发送n个比特，因此，在发送端和接收端之间需要有n条传输线路
>
> * 并行传输的优点是比串行传输的速度n倍，但成本高
>
> 数据在传输线路上的传输采用是**串行传输**，计算机内部的数据传输常用**并行传输**



### 3.2 同步传输和异步传输

![image-20201008140209430](assets/image-20201008140209430.png)

> **同步传输**：
>
> * 数据块以稳定的比特流的形式传输。字节之间没有间隔
> * 接收端在每个比特信号的中间时刻进行检测，以判别接收到的是比特0还是比特1
> * 由于不同设备的时钟频率存在一定差异，不可能做到完全相同，在传输大量数据的过程中，所产生的判别时刻的累计误差，会导致接收端对比特信号的判别错位
>
> 所以要使收发双发时钟保持同步

![image-20201008140850958](assets/image-20201008140850958.png)

> **异步传输**：
>
> * 以字节为独立的传输单位，字节之间的时间间隔不是固定
> * 接收端仅在每个字节的起始处对字节内的比特实现同步
> * 通常在每个字节前后分别加上起始位和结束位



### 3.3 单向通信（单工）、双向交替通信（半双工）和双向同时通信（全双工）

在许多情况下，我们要使用“**信道（channel）**”这一名词。信道和电路并不等同。信道一般都是用来表示向某一个方向传送信息的媒体。因此，一条通信电路往往包含一条发送信道和一条接收信道。

从通信的双方信息交互的方式来看，可以有以下三种基本方式：

**单向通信**：

又称为**单工通信**，即只能有一个方向的通信而没有反方向的交互。无线电广播或有线电以及电视广播就属于这种类型

![image-20201008141345239](assets/image-20201008141345239.png)

**双向交替通信**：

又称为**半双工通信**，即通信的双方可以发送信息，但不能双方同时发送（当然也就不能同时接收）。这种通信方式使一方发送另一方接收，过一段时间后可以再反过来

![image-20201008141921924](assets/image-20201008141921924.png)

**双向同时通信**：

又称为**全双工通信**，即通信的双发可以同时发送和接收信息。

![image-20201008142037846](assets/image-20201008142037846.png)

> **单向通信**只需要一条信道，而**双向交替通信**或**双向同时通信**则需要两条信道（每个方向各一条）
>
> **双向同时通信**的传输效率最高



## 4 编码与调制

![image-20201008144616896](assets/image-20201008144616896.png)

> **常用术语**
>
> * **数据 (data)** —— 运送消息的实体。
> * **信号 (signal)** —— 数据的电气的或电磁的表现。 
> * **模拟信号 (analogous signal)** —— 代表消息的参数的取值是连续的。 
> * **数字信号 (digital signal)** —— 代表消息的参数的取值是离散的。 
> * **码元 (code)** —— 在使用时间域（或简称为时域）的波形表示数字信号时，代表不同离散数值的基本波形。
>
> * **基带信号**（即基本频带信号）—— 来自信源的信号。像计算机输出的代表各种文字或图像文件的数据信号都属于基带信号。
> * 基带信号往往包含有较多的低频成分，甚至有直流成分，而许多信道并不能传输这种低频分量或直流分量。因此必须对基带信号进行**调制**  (modulation)。 

在计算机网络中，常见的是将数字基带信号通过编码或调制的方法在相应信道进行传输

![image-20201008145747263](assets/image-20201008145747263.png)



### 4.1 传输媒体与信道的关系

> **信道的几个基本概念**
>
> * **信道** —— 一般用来表示向某一个方向传送信息的媒体。
> * **单向通信（单工通信）**——只能有一个方向的通信而没有反方向的交互。
> * **双向交替通信（半双工通信）**——通信的双方都可以发送信息，但不能双方同时发送(当然也就不能同时接收)。
> * **双向同时通信（全双工通信）**——通信的双方可以同时发送和接收信息。 

严格来说，传输媒体不能和信道划等号

对于单工传输，传输媒体只包含一个信道，要么是发送信道，要么是接收信道

![image-20201008145304974](assets/image-20201008145304974.png)

对于半双工和全双工，传输媒体中要包含两个信道，一个发送信道，另一个是接收信道

![image-20201008145329540](assets/image-20201008145329540.png)

> 如果使用信道复用技术，一条传输媒体还可以包含多个信道



### 4.2 常用编码

**不归零编码**

![image-20201008150058039](assets/image-20201008150058039.png)

> * 正电平表示比特1/0
>
> * 负电平表示比特0/1
>
> 中间的虚线是零电平，所谓不归零编码，就是指在整个码元时间内，电平不会出现零电平
>
> **实际比特1和比特0的表示要看现实怎么规定**

![image-20201008150528228](assets/image-20201008150528228.png)

> 这需要发送方的发送与接收方的接收做到严格的同步
>
> * 需要**额外一根传输线来传输时钟信号**，使发送方和接收方同步，接收方按时钟信号的节拍来逐个接收码元
> * **但是**对于计算机网络，**宁愿利用这根传输线传输数据信号**，而不是传输时钟信号
>
> 由于**不归零编码**存在**同步问题**，因此计算机网络中的数据传输不采用这类编码！



**归零编码**

![image-20201008195033189](assets/image-20201008195033189.png)

<img src="assets/image-20201008151347028.png" alt="image-20201008151347028" style="zoom:67%;" />

> **归零编码**虽然**自同步**，但**编码效率低**



**曼彻斯特编码**

![image-20201008195148727](assets/image-20201008195148727.png)

> 在每个码元时间的中间时刻，信号都会发生跳变
>
> * 负跳变表示比特1/0
> * 正跳变表示比特0/1
> * 码元中间时刻的跳变即表示时钟，又表示数据
>
> **实际比特1和比特0的表示要看现实怎么规定**
>
> 传统以太网使用的就是曼切斯特编码



**差分曼彻斯特编码**

![image-20201008195235561](assets/image-20201008195235561.png)

> 在每个码元时间的中间时刻，信号都会发送跳变，但与**曼彻斯特不同**
>
> * **跳变仅表示时钟**
> * **码元开始处电平是否变换表示数据**
>   * 变化表示比特1/0
>   * 不变化表示比特0/1
>
> **实际比特1和比特0的表示要看现实怎么规定**
>
> 比曼彻斯特编码变化少，更适合较高的传输速率



**总结**

![image-20201008153522501](assets/image-20201008153522501.png)



### 4.3 调制

数字信号转换为模拟信号，在模拟信道中传输，例如WiFi，采用补码键控CCK/直接序列扩频DSSS/正交频分复用OFDM等**调制**方式。

模拟信号转换为另一种模拟信号，在模拟信道中传输，例如，语音数据加载到模拟的载波信号中传输。频分复用FDM技术，充分利用带宽资源。

**基本调制方法**

![image-20201008155429044](assets/image-20201008155429044.png)

> * **调幅AM**：所调制的信号由两种不同振幅的基本波形构成。每个基本波形只能表示1比特信息量。
> * **调频FM**：所调制的信号由两种不同频率的基本波形构成。每个基本波形只能表示1比特信息量。
> * **调相PM**：所调制的信号由两种不同初相位的基本波形构成。每个基本波形只能表示1比特信息量。
>
> 但是使用基本调制方法，1个码元只能包含1个比特信息

**混合调制**

![image-20201008155804617](assets/image-20201008155804617.png)

![image-20201008155835940](assets/image-20201008155835940.png)

![image-20201008155955169](assets/image-20201008155955169.png)

![image-20201008160133748](assets/image-20201008160133748.png)

> 上图码元所对应的4个比特是错误的，码元不能随便对应4个比特

![image-20201008160208060](assets/image-20201008160208060.png)



### 4.4 码元

在使用时间域的波形表示数字信号时，代表不同离散数值的基本波形。



## 5 信道的极限容量

* 任何实际的信道都不是理想的，在传输信号时会产生各种失真以及带来多种干扰。 
* 码元传输的速率越高，或信号传输的距离越远，或传输媒体质量越差，在信道的输出端的波形的失真就越严重。

![image-20201010204336400](assets/image-20201010204336400.png)

失真的原因：

* 码元传输的速率越高
* 信号传输的距离越远
* 噪声干扰越大
* 传输媒体质量越差

![image-20201010204818976](assets/image-20201010204818976.png)

![image-20201010204928756](assets/image-20201010204928756.png)

奈氏准则和香农公式对比：

![image-20201010205029346](assets/image-20201010205029346.png)



## 6 信道复用技术

本节内容视频未讲到，是《计算机网络（第7版）谢希仁》物理层的内容

### 6.1 频分复用、时分复用和统计时分复用

复用 (multiplexing) 是通信技术中的基本概念。

它允许用户使用一个共享信道进行通信，降低成本，提高利用率。

![image-20201011001949479](assets/image-20201011001949479.png)

**频分复用 FDM (Frequency Division Multiplexing)**

* 将整个带宽分为多份，用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。
* **频分复用**的所有用户在同样的时间**占用不同的带宽资源**（请注意，这里的“带宽”是频率带宽而不是数据的发送速率）。 

![image-20201011002236208](assets/image-20201011002236208.png)

**时分复用TDM (Time Division Multiplexing)** 

* **时分复用**则是将时间划分为一段段等长的**时分复用帧（TDM帧）**。每一个时分复用的用户在每一个 TDM 帧中占用固定序号的时隙。
* 每一个用户所占用的时隙是**周期性地出现**（其周期就是TDM帧的长度）的。
* TDM 信号也称为**等时** (isochronous) 信号。
* **时分复用的所有用户在不同的时间占用同样的频带宽度。**

![image-20201011002540041](assets/image-20201011002540041.png)

* **时分复用可能会造成线路资源的浪费**
  * 使用时分复用系统传送计算机数据时，由于计算机数据的突发性质，用户对分配到的子信道的利用率一般是不高的。

![image-20201011002842704](assets/image-20201011002842704.png)

**统计时分复用 STDM  (Statistic TDM)** 

![image-20201011002953703](assets/image-20201011002953703.png)





### 6.2 波分复用

波分复用 WDM(Wavelength Division Multiplexing)

![image-20201011003214653](assets/image-20201011003214653.png)



### 6.3 码分复用

码分复用 CDM  (Code Division Multiplexing)

* 常用的名词是**码分多址** CDMA (Code Division Multiple Access)。
* 各用户使用经过特殊挑选的不同码型，因此彼此不会造成干扰。
* 这种系统发送的信号有很强的抗干扰能力，其频谱类似于白噪声，不易被敌人发现。 

